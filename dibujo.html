<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dibujo Gótico Retro Neón</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --neon-cyan: #3fe8c9;
      --neon-gold: #c9a24a;
      --muted: #e6e1d6;
    }

    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      background: #000;
      color: var(--muted);
      font-family: 'Cinzel', serif;
      overflow: auto;
    }

    /* Fondo completo */
    .bg-container {
      position: relative;
      width: 100%;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .bg-container img {
      width: auto;
      height: auto;
      max-width: none;
      max-height: none;
      display: block;
    }

    /* Contenedor principal */
    .draw-wrapper {
      position: absolute;
      top: 50%;
      left: 17%;
      transform: translateY(-50%);
      display: flex;
      gap: 20px;
      align-items: flex-start;
      z-index: 50;
    }

    /* Columna de controles */
    .controls-column {
      display: flex;
      flex-direction: column;
      gap: 16px;
      background: rgba(0, 0, 0, 0.6);
      padding: 16px;
      border-radius: 14px;
      border: 1px solid rgba(63,232,201,0.15);
      box-shadow: 0 0 25px rgba(63,232,201,0.25);
      animation: neonPulse 5s infinite ease-in-out alternate;
      width: 140px;
      backdrop-filter: blur(4px);
    }

    @keyframes neonPulse {
      0% { box-shadow: 0 0 25px rgba(63,232,201,0.25); }
      50% { box-shadow: 0 0 40px rgba(201,162,74,0.55); }
      100% { box-shadow: 0 0 25px rgba(63,232,201,0.25); }
    }

    .tool, .btn {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      background: linear-gradient(180deg,#101818,#050808);
      color: var(--muted);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .tool svg {
      width: 20px; height: 20px;
      fill: var(--neon-cyan);
    }

    .tool:hover, .btn:hover {
      color: var(--neon-gold);
      box-shadow: 0 0 15px var(--neon-cyan), inset 0 0 10px rgba(63,232,201,0.4);
      transform: translateY(-2px);
    }

    .tool.active {
      color: var(--neon-gold);
      outline: 2px solid var(--neon-cyan);
      box-shadow: 0 0 20px var(--neon-cyan);
    }

    label { font-size: 13px; margin-bottom: 4px; color: var(--muted); }

    input[type=color], input[type=range] {
      width: 100%;
      border-radius: 8px;
      background: #0b0b0b;
      border: 1px solid rgba(255,255,255,0.2);
      cursor: pointer;
    }

    /* Área de dibujo exacta */
    .draw-area {
      width: 330px;
      height: 465px;
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 0 25px rgba(63,232,201,0.2), inset 0 0 20px rgba(201,162,74,0.2);
      border: 2px solid rgba(255,255,255,0.08);
      position: relative;
      animation: neonBorder 5s infinite ease-in-out alternate;
    }

    /* Sincronizado con los botones */
    @keyframes neonBorder {
      0% {
        box-shadow:
          0 0 15px rgba(63,232,201,0.25),
          0 0 25px rgba(63,232,201,0.25),
          inset 0 0 10px rgba(201,162,74,0.15);
      }
      50% {
        box-shadow:
          0 0 25px rgba(201,162,74,0.55),
          0 0 35px rgba(63,232,201,0.55),
          inset 0 0 15px rgba(201,162,74,0.3);
      }
      100% {
        box-shadow:
          0 0 15px rgba(63,232,201,0.25),
          0 0 25px rgba(63,232,201,0.25),
          inset 0 0 10px rgba(201,162,74,0.15);
      }
    }

    canvas#drawingCanvas {
      width: 100%;
      height: 100%;
      border-radius: 14px;
      cursor: crosshair;
      background: transparent;
    }
  </style>
</head>
<body>
  <div class="bg-container">
    <img src="https://i.pinimg.com/736x/04/4d/c3/044dc36ad64f1c3c2ed494ae5787e23b.jpg" alt="Fondo completo" />

    <div class="draw-wrapper">
      <div class="controls-column">
        <button class="tool active" data-tool="brush" title="Pincel"><svg viewBox="0 0 24 24"><path d="M2 22c3-6 8-10 13-13l2 2c-3 5-7 10-13 13z"/></svg></button>
        <button class="tool" data-tool="pencil" title="Lápiz"><svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/></svg></button>
        <button class="tool" data-tool="eraser" title="Borrador"><svg viewBox="0 0 24 24"><path d="M16 2l6 6-9.29 9.29a1 1 0 01-.7.29H4a1 1 0 01-.7-1.71L13 2h3z"/></svg></button>

        <label>Color</label>
        <input id="colorPicker" type="color" value="#000000">
        <label>Tamaño</label>
        <input id="brushSize" type="range" min="1" max="80" value="6">
        <label>Opacidad</label>
        <input id="opacity" type="range" min="10" max="100" value="100">

        <button class="btn" id="clearCanvas">Borrar todo</button>
        <button class="btn" id="downloadBtn">Descargar PNG</button>
      </div>

      <div class="draw-area">
        <canvas id="drawingCanvas" width="400" height="620"></canvas>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('drawingCanvas');
    const ctx = canvas.getContext('2d');
    const colorPicker = document.getElementById('colorPicker');
    const brushSize = document.getElementById('brushSize');
    const opacity = document.getElementById('opacity');
    const clearBtn = document.getElementById('clearCanvas');
    const downloadBtn = document.getElementById('downloadBtn');
    const tools = document.querySelectorAll('.tool');

    let tool = 'brush';
    tools.forEach(t => t.addEventListener('click', () => {
      tools.forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      tool = t.dataset.tool;
    }));

    let drawing = false, lastX = 0, lastY = 0;

    function getPointerPos(e){
      const r = canvas.getBoundingClientRect();
      const x = (e.clientX || e.touches?.[0]?.clientX) - r.left;
      const y = (e.clientY || e.touches?.[0]?.clientY) - r.top;
      return {x, y};
    }

    function start(e){ drawing = true; const p = getPointerPos(e); lastX=p.x; lastY=p.y; ctx.beginPath(); ctx.moveTo(p.x,p.y); }
    function stop(){ drawing = false; ctx.beginPath(); }

    function draw(e){
      if(!drawing) return;
      e.preventDefault();
      const p = getPointerPos(e);
      const size = brushSize.value;
      const alpha = opacity.value/100;
      ctx.lineJoin='round'; ctx.lineCap='round';

      if(tool==='eraser'){
        ctx.globalCompositeOperation='destination-out'; ctx.strokeStyle='rgba(0,0,0,1)';
      } else {
        ctx.globalCompositeOperation='source-over';
        ctx.strokeStyle = hexToRgba(colorPicker.value, alpha);
      }

      ctx.lineWidth = size;
      ctx.lineTo(p.x,p.y);
      ctx.stroke();
      lastX=p.x; lastY=p.y;
    }

    function hexToRgba(hex,a){
      const h = hex.replace('#','');
      const r = parseInt(h.substring(0,2),16);
      const g = parseInt(h.substring(2,4),16);
      const b = parseInt(h.substring(4,6),16);
      return `rgba(${r},${g},${b},${a})`;
    }

    canvas.addEventListener('pointerdown', start);
    canvas.addEventListener('pointermove', draw);
    window.addEventListener('pointerup', stop);

    clearBtn.addEventListener('click', ()=> ctx.clearRect(0,0,canvas.width,canvas.height));

    downloadBtn.addEventListener('click', ()=>{
      const link = document.createElement('a');
      link.download = 'dibujo_gotico_vikingo.png';
      const temp = document.createElement('canvas');
      temp.width = canvas.width; temp.height = canvas.height;
      const tctx = temp.getContext('2d');
      tctx.fillStyle = '#fff';
      tctx.fillRect(0,0,temp.width,temp.height);
      tctx.drawImage(canvas,0,0);
      link.href = temp.toDataURL('image/png');
      link.click();
    });
  </script>
</body>
</html>
